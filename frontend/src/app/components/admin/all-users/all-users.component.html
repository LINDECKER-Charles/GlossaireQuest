<main class="page">
  <section aria-labelledby="users-title" class="card max-w-2xl w-full m-8 mx-auto">
    
    <!-- Titre -->
    <h1 id="users-title" class="section-title text-center mb-6">
      Liste des utilisateurs
    </h1>

    <!-- Loading -->
    <div *ngIf="loading" class="text-center text-muted animate-pulse py-6">
      Chargement des utilisateurs...
    </div>

    <!-- Erreur -->
    <div *ngIf="error" class="text-center text-red-500 font-semibold py-4">
      {{ error }}
    </div>

    <!-- Tableau des utilisateurs -->
    <div *ngIf="!loading && users?.length" class="overflow-x-auto">
      
      <table class="w-full text-left border-collapse">
        <thead class="bg-neutral-900 text-primary-400">
          <tr>
            <th class="py-3 px-4">Nom</th>
            <th class="py-3 px-4">Email</th>
            <th class="py-3 px-4 text-center">Rôle</th>
            <th class="py-3 px-4 text-center">Vérifié</th>
            <th class="py-3 px-4 text-center">Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr
            *ngFor="let u of users"
            class="border-t border-neutral-700 hover:bg-neutral-800/70 transition duration-200"
          >
            <td class="py-3 px-4">{{ u.name }}</td>
            <td class="py-3 px-4">{{ u.email }}</td>

            <td class="py-3 px-4 text-center">
              <span
                class="font-semibold"
                [ngClass]="{
                  'text-primary-400': u.role === 'USER',
                  'text-red-400': u.role === 'ADMIN'
                }"
              >
                {{ u.role }}
              </span>
            </td>

            <td class="py-3 px-4 text-center">
              <span
                class="font-semibold"
                [ngClass]="{
                  'text-green-400': u.isVerified,
                  'text-red-400': !u.isVerified
                }"
              >
                {{ u.isVerified ? 'Oui' : 'Non' }}
              </span>
            </td>

            <td class="py-3 px-4 text-center">
              <button
                class="btn-outline py-1.5 px-3 text-sm"
                routerLink="/admin/profil/{{ u.email }}"
              >
                Voir
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Aucun utilisateur -->
    <div
      *ngIf="!loading && (!users?.length || users?.length === 0)"
      class="text-center text-muted py-6"
    >
      Aucun utilisateur trouvé.
    </div>

  </section>
</main>
